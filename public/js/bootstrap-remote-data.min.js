var $=jQuery;
/*
 *
 * Bootstrap remote data tabs plugin
 * Version 1.1.1
 *
 * Author: Stephen Hoogendijk (TheCodeAssassin)
 *
 * Licensed under the GPLV2 license.
 *
 * @returns {{hasLoadingMask: boolean, load: Function, _executeRemoteCall: Function}}
 * @constructor
 */
var hasLoadingMask=(jQuery().mask?true:false),bootstrapVersion2=(jQuery().typeahead?true:false);var tabShowEvent=(bootstrapVersion2?"show":"show.bs.tab");var accordionShowEvent=(bootstrapVersion2?"show":"show.bs.collapse");$(function(){var c=document.location.hash;if(c){var a=$("[data-toggle=tab][href="+c+"]");if(a){a.tab("show")}var b=$("[data-toggle=collapse][href="+c+"]");if(b){if(b[0]!=$("[data-toggle=collapse]:first")[0]){b.click()}}}});var RemoteTabs=function(){var a={hasLoadingMask:false,load:function(c){var b=this;b.hasLoadingMask=!!c;$("[data-toggle=tab], [data-toggle=collapse]").each(function(g,i){var p=$(i),j,m,n,d,l,f,h=false,e;if(p.is("[data-tab-url]")){d=p.attr("data-tab-url");j=$("#"+p.attr("href").split("#")[1]);m=p.attr("data-tab-json")||[];n=p.attr("data-tab-callback")||null;l=p.attr("data-tab-delay")||null;f=(p.is("[data-tab-always-refresh]")&&p.attr("data-tab-always-refresh")=="true")||null,e=p,showEvent=(p.attr("data-toggle")=="tab"?tabShowEvent:accordionShowEvent);if(m.length>0){try{m=$.parseJSON(m)}catch(o){console.log("Invalid json passed to data-tab-json");console.log(o)}}if(showEvent==accordionShowEvent){h=j.hasClass("in");if(bootstrapVersion2){p=p.parent()}else{p=p.parents(".panel")}if(h){b._triggerChange(null,d,m,n,p,j,l,f,e)}}p.on(showEvent,function(k){b._triggerChange(k,d,m,n,p,j,l,f,e)})}})},_triggerChange:function(f,b,j,k,l,g,i,d,c){var h=this;if(f){if(typeof f.target.hash!="undefined"){window.location.hash=f.target.hash}else{window.location.hash=c.prop("hash")}}if((!l.hasClass("loaded")||d)&&!l.hasClass("loading")){if(h.hasLoadingMask){g.mask("Loading...")}l.addClass("loading");if(i){clearTimeout(window.timer);window.timer=setTimeout(function(){h._executeRemoteCall(b,j,k,l,g)},i)}else{h._executeRemoteCall(b,j,k,l,g)}}},_executeRemoteCall:function(d,g,b,c,f){var e=this;$.ajax({url:d,data:g||[],success:function(h){c.removeClass("loading");if(e.hasLoadingMask){f.unmask()}if(h){if(typeof window[b]=="function"){window[b].call(null,h,c,f,g)}if(!c.hasClass("loaded")){c.addClass("loaded")}f.html(h)}},error:function(j,h,i){f.html("An error occured while loading the data: "+i);c.removeClass("loading");if(e.hasLoadingMask){f.unmask()}}})}};a.load(hasLoadingMask);return a};var remoteTabsPluginLoaded=new RemoteTabs();